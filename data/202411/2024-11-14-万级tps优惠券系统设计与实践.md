# 万级TPS优惠券系统设计与实践
- URL: https://mp.weixin.qq.com/s/qs3Okf7Jxh9nYFHfG7MGsQ
- Added At: 2024-11-14 12:26:07
- [Link To Text](2024-11-14-万级tps优惠券系统设计与实践_raw.md)

## TL;DR
本文介绍了腾讯云MALL优惠券平台搭建，涵盖创建、派发、使用、统计四大核心能力，并针对高并发、分布式事务等热点问题提出优化方案。

## Summary
1. **背景介绍**：
    - 优惠券是电商营销重要手段，腾讯云MALL需要搭建优惠券平台能力。
    - 优惠券系统包括创建、派发、使用、统计四大核心能力。

2. **优惠券系统概述**：
    - 优惠券系统涉及电商平台优惠券相关页面，如某东、某宝、腾讯云MALL。
    - 主要核心能力：创建、派发、使用、统计。

3. **优惠券创建**：
    - 核心概念：优惠券批次、优惠券。
    - 批次表核心字段：批次ID、优惠券名称、优惠券类型、库存数量等。
    - 优惠券表核心字段：优惠券ID、批次ID、用户ID、优惠券状态等。

4. **优惠券派发**：
    - 两大主要问题：库存管理、场景复杂。
    - 库存扣减：使用Redis+Lua实现高并发库存扣减。
    - 生成优惠券：异步生成优惠券信息，解决高并发和分布式事务问题。

5. **后续优化**：
    - 热点问题：同批次场景热点问题。
    - 优化方案：资源分桶、聚合扣减、热点更新。

6. **总结**：
    - 优惠券系统设计需要考虑高并发、分布式事务等问题。
    - 优化方案需根据实际业务场景进行权衡。
