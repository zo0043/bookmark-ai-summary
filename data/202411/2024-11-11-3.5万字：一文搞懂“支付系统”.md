# 3.5万字：一文搞懂“支付系统”
- URL: https://mp.weixin.qq.com/s?__biz=Mzg2MTg1NTM4NA==&mid=2247496752&idx=1&sn=873a2c35041818c331ba1062cc3c99e2&chksm=ce127fc7f965f6d1eb1cee0568de0d294702303297039e212f3fc71053a3c4fe1b05b14a7b48&scene=21#wechat_redirect
- Added At: 2024-11-11 02:05:14
- [Link To Text](2024-11-11-3.5万字：一文搞懂“支付系统”_raw.md)

## TL;DR
全面解析支付系统，涵盖架构、流程、收银台、路由、退款等，探讨创新思维提升系统灵活性和扩展性。

## Summary
1. **文章概述**：
   - 全文35924字，深入解析支付系统，涵盖支付架构、全局流程、收银台、路由、退款、单据关系等多个方面。
   - 文中包含多个图解，帮助理解支付系统的复杂性和运作机制。

2. **支付核心**：
   - 支付核心是处理支付流程的核心系统，包括支付处理、单据处理、结果处理、外部服务调用等。
   - 文中详细介绍了支付核心的各个模块和功能，如支付单据、支付协议、支付营销等。

3. **支付架构**：
   - 支付架构由5层组成：支付渠道层、支付网关层、支付核心层、统一支付能力层、接入层。
   - 每层都有其特定的功能和作用，共同构成一个完整的支付体系。

4. **支付流程**：
   - 文中详细描述了支付的全局流程，从交易处理、收银台展示、支付请求、渠道交互到支付结果通知的各个环节。
   - 涵盖了支付的核心流程，如参数校验、风控处理、路由选择、支付指令提交等。

5. **收银台**：
   - 收银台是用户进行支付操作的界面，包括支付方式选择、支付金额、支付按钮等。
   - 文中介绍了收银台的设计原则、产品架构、业务架构和关键指标。

6. **路由**：
   - 路由是根据交易特征选择最匹配的支付通道的系统。
   - 文中详细介绍了路由的架构解析、实现原理、规则体系等。

7. **支付网关**：
   - 支付网关是公开网络和银行专用网络之间的接口，负责验证、校验、加密等安全功能。
   - 文中介绍了支付网关的定义、服务、限流原理等。

8. **支付通道**：
   - 支付通道是连接消费者、商家和银行的网络通路，用于信息传递和资金流动。
   - 文中介绍了支付通道的概念、分类、结构关系、接入流程等。

9. **通道管理**：
   - 通道管理是支付系统中重要的模块，用于管理支付通道的配置、成本、参数等。
   - 文中介绍了通道管理列表、成本规则、参数配置等功能。

10. **创新思维**：
    - 文中提出了“广义通道”的概念，即任何能实现“广义收付指令发起”或“广义收付结果接收”的路径都可以被视为通道。
    - 通过广义通道和支付架构，可以将更多的支付相关业务纳入支付系统，提高系统的灵活性和扩展性。
