# Systems design for advanced beginners
- URL: https://robertheaton.com/2020/04/06/systems-design-for-advanced-beginners/
- Added At: 2024-10-21 12:11:44
- [Link To Text](2024-10-21-systems-design-for-advanced-beginners_raw.md)

## TL;DR
Steveslist是由创始人及其团队打造的一个类似Craigslist的在线市场平台。面临技术挑战时，聘请了经验丰富的技术顾问Kate。平台包括web app、手机应用、API及客户端库，采用用户认证、数据库分片、数据备份、全文搜索等技术保障运营。未来将扩展更多产品和服务，深入探讨平台内部机制。

## Summary
1. **公司背景**：与朋友Steve Steveington共同创办了一家在线市场平台Steveslist，类似于Craigslist，用户可以在此买卖商品。

2. **技术挑战**：对构建大型在线平台的复杂基础设施感到迷茫，需要一位经验丰富的技术专家指导。

3. **技术顾问**：聘请了Kate Kateberry作为技术顾问，她拥有丰富的系统设计经验。

4. **未来展望**：Kate描述了Steveslist五年后的愿景，包括多个面向消费者的产品和服务。

5. **Steveslist web app**：一个现代化的单页应用（SPA），用户可以通过浏览器与平台交互，页面通过JavaScript动态更新。

6. **Steveslist智能手机应用**：为iOS和Android用户提供应用，功能与web app相似，但需要开发特定的前端。

7. **Steveslist API**：允许用户和第三方通过编写代码与平台交互，如搜索、购买和列出商品。

8. **Steveslist客户端库**：简化了与API的交互，为主要的编程语言提供了库，方便开发者使用。

9. **Webhooks**：当用户账户发生特定事件时，Steveslist会向用户指定的URL发送HTTP请求，以便用户可以自动执行响应操作。

10. **Webhooks的安全性问题**：通过加密签名确保webhooks的真实性，防止伪造请求。

11. **Webhooks的可靠性问题**：Steveslist保证至少一次交付webhooks，如果发送失败会重试，直到成功。

12. **用户认证**：用户通过用户名和密码登录，密码通过bcrypt等哈希函数进行安全存储。

13. **数据库服务器**：使用MySQL作为主要的数据存储，随着数据量的增长，采用分片技术将数据分布在多台机器上。

14. **分片**：根据用户ID将数据分片，每个用户的数据存储在同一台机器上，需要额外的路由层来确定查询应该发送到哪个数据库分片。

15. **数据迁移**：当分片需要扩展时，通过一系列步骤将数据迁移到新的分片中，确保数据的一致性。

16. **复制**：实时复制数据到多台机器，以防止单点故障，并提高查询的并行处理能力。

17. **同步与异步复制**：同步复制确保数据写入后立即复制，而异步复制则允许更快的写入速度，但可能存在数据不一致的风险。

18. **备份**：定期备份整个数据库，以防止灾难性数据丢失。

19. **全文搜索**：使用Elasticsearch等文档导向型数据库进行全文搜索，提高搜索的相关性和速度。

20. **内部工具**：开发专门的内部工具来管理Steveslist平台，如用户管理、服务器管理和欺诈检测等。

21. **Cron作业**：使用cron工具来执行定期的任务，如发送邮件报告、营销邮件和数据处理等。

22. **Pubsub系统**：使用发布-订阅系统来异步执行响应动作，提高用户体验和系统性能。

23. **大数据和数据分析**：使用Hive等数据仓库进行大规模的数据分析，复制生产数据库中的数据进行分析。

24. **未来讨论**：Kate计划继续讨论更多关于大型在线平台的内部工作原理，包括安全性、服务器管理和大数据等方面。
