# 一文搞懂第三方支付系统架构设计
- URL: https://mp.weixin.qq.com/s/Z2sNg-VjdmGD5kymZPrrYQ
- Added At: 2024-10-18 09:11:21
- [Link To Text](2024-10-18-一文搞懂第三方支付系统架构设计_raw.md)

## TL;DR
文章概述了支付方式从现金到第四方支付的演变，重点介绍了第三方支付的运作模式、账户体系和领域角色，强调其在现代支付中的重要性，并预告后续将深入探讨各领域细节。

## Summary
1. **支付方式发展历程**：
   - **第一方支付**：即现金支付，是最早的支付方式，但随着商业发展，不适用于大宗交易。
   - **第二方支付**：依托于银行，解决大额交易的安全和便捷性问题，但在日常小额支付中逐渐退出。
   - **第三方支付**：独立机构通过签约银行提供网络支付服务，如微信支付和支付宝，逐渐取代中小额现金交易。
   - **第四方支付**：聚合多个第三方支付和银行渠道，提供一站式支付解决方案，但存在资金安全风险。

2. **第三方支付概述**：
   - **领域角色**：包括用户、商户、银行和第三方支付工具。
   - **三种账户**：
     - **用户账户**：记录用户ID、余额和资金变动，特点是少并发、低交易频率、余额敏感。
     - **商户账户**：记录商户ID、余额和资金变动，特点是高并发、高交易频率、余额变动不敏感。
     - **银行账户**：映射各大银行，特点是数量有限、金额流水庞大、高并发、余额不敏感。
   - **运作模式**：
     - **用户充值**：用户银行账户向支付工具备付金账户转账，支付工具增加用户余额。
     - **用户提现**：支付工具减少用户余额，备付金账户向用户银行账户转账。
     - **用户转账**：支付工具内部账户间划转，不涉及备付金账户变动。
   - **支付交互**：支付工具连接银行、用户和商户，提供充值、提现、支付、退款和结算等功能。
   - **领域拆分**：支付（广义）、退款、付款、结算等，各领域提供基础能力，服务不同业务场景。

3. **结束语**：
   - 总结了第三方支付的定义、账户体系、资金流动和主要领域。
   - 提出后续将对每个领域进行更详细的探索和理解。
