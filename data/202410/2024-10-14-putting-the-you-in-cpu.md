# putting the you in cpu
- URL: https://cpu.land/the-basics
- Added At: 2024-10-14 18:40:00
- [Link To Text](2024-10-14-putting-the-you-in-cpu_raw.md)

## TL;DR
文章概述了计算机工作原理，重点讲解CPU架构、内存管理、处理器模式及系统调用机制，并对比CISC与RISC指令集，强调系统调用在不同架构下的实现差异，为理解计算机运行基础提供关键知识。

## Summary
1. **计算机工作原理**：文章介绍了计算机工作的基本原理，特别是中央处理器（CPU）的功能和指令执行过程。

2. **CPU架构**：
   - **指令执行**：CPU负责所有计算任务，通过不断执行指令来完成工作。
   - **机器码与汇编**：CPU执行的是二进制数据，即机器码。汇编语言是一种便于人类阅读和书写的语法，用于表示机器码。

3. **内存与指令指针**：
   - **RAM**：随机存取存储器（RAM）是计算机的主要内存库，存储程序代码和操作系统核心代码。
   - **指令指针**：CPU存储一个指令指针，指向RAM中将要获取的下一条指令的位置。执行完每条指令后，指针移动到下一条指令。

4. **处理器模式**：
   - **用户模式与内核模式**：现代处理器架构通常至少有两种模式：内核模式（或称特权级别）和用户模式。内核模式允许CPU执行任何支持的指令和访问任何内存，而用户模式只允许执行部分指令，I/O和内存访问受限。

5. **系统调用（Syscall）**：
   - **用户模式限制**：程序在用户模式下运行，因为它们不能被信任以完全访问计算机。
   - **请求操作系统帮助**：为了与操作系统交互，用户模式程序需要请求操作系统的帮助，这通过系统调用来实现。
   - **软件中断**：程序使用软件中断（如INT指令）来触发系统调用，使CPU从用户模式切换到内核模式。

6. **抽象层**：
   - **库函数**：操作系统提供抽象层，如Unix-like系统中的libc和Windows中的ntdll.dll，以便程序员不必直接处理中断和系统调用。
   - **系统调用的封装**：库函数封装了必要的汇编指令，程序员通过调用这些函数来执行系统调用。

7. **指令集架构**：
   - **CISC与RISC**：复杂的指令集计算机（CISC）和精简指令集计算机（RISC）在系统调用的实现上有不同的指令集。
   - **优化指令**：x86-64架构有两种优化的系统调用指令：SYSCALL和SYSENTER，以及对应的返回指令SYSRET和SYSEXIT。

8. **总结**：文章回顾了CPU的工作原理、处理器模式、系统调用机制以及不同架构下的系统调用实现方式。这些基础知识对于理解计算机如何运行至关重要。
