# putting the you in cpu
- URL: https://cpu.land/the-basics
- Added At: 2024-10-12 07:16:09
- [Link To Text](2024-10-12-putting-the-you-in-cpu_raw.md)

## TL;DR
文章介绍了计算机架构基础，重点讲解了CPU的工作原理、指令与机器码、RAM的作用、取指-执行周期、寄存器、处理器模式、系统调用、中断向量表和多程序运行机制，揭示了计算机操作的简洁性和高效性。

## Summary
1. **计算机架构基础**：文章介绍了计算机的基本工作原理，强调了计算机的简洁性，并指出计算机的所有操作都基于简单的二进制指令。

2. **中央处理器（CPU）的作用**：CPU负责所有的计算任务，是计算机的核心。文章以Intel 4004为例，介绍了CPU的发展历程和基本工作原理。

3. **指令与机器码**：CPU执行的指令是二进制数据，包括操作码和数据。机器码是一系列二进制指令的集合，汇编语言是一种更易于人类阅读和书写的语法，用于表示机器码。

4. **随机存取存储器（RAM）**：RAM是计算机的主要内存库，存储了运行在计算机上的所有程序所需的数据，包括程序代码和操作系统核心代码。CPU直接从RAM中读取机器码。

5. **指令指针与取指-执行周期**：CPU存储一个指令指针，指向RAM中下一个要读取的指令的位置。取指-执行周期是指CPU读取指令、执行指令，然后移动指令指针的过程。

6. **寄存器**：寄存器是CPU内部的高速存储单元，用于存储临时值和配置处理器。有些寄存器可以直接从机器码中访问，有些则只能由CPU内部使用。

7. **处理器模式的简单性**：处理器在启动时处于内核模式，但在执行程序时会切换到用户模式。用户模式限制了程序的权限，以防止恶意操作。

8. **系统调用（Syscall）**：程序在用户模式下运行时，需要通过系统调用请求操作系统帮助以执行某些操作。系统调用是一种特殊的程序，允许程序从用户空间切换到内核空间。

9. **中断向量表（IVT）**：操作系统在启动过程中会在RAM中存储一个中断向量表，并将它注册到CPU。中断向量表将中断号映射到处理程序的代码指针。

10. **软件中断**：用户模式程序可以使用软件中断指令（如INT）来触发系统调用，CPU会查找中断向量表，切换到内核模式，并将指令指针跳转到中断向量表中的内存地址。

11. **封装API**：操作系统提供封装API（如libc和ntdll.dll），这些API将系统调用封装成易于使用的函数，程序员无需直接编写汇编代码来触发系统调用。

12. **处理器指令集**：CISC架构（如x86-64）包含专门用于系统调用的指令，如SYSCALL和SYSENTER。RISC架构（如AArch64）则使用通用的中断指令来处理系统调用。

13. **多程序运行机制**：文章最后提出了一个问题：如果CPU只是简单地按顺序执行指令，那么它是如何处理多程序运行的呢？文章暗示了时钟和定时器在这一机制中的作用，将在后续章节中详细解释。
