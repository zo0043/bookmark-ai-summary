# 后端开发和你聊聊JVM如何优化
- URL: https://mp.weixin.qq.com/s/Gsd-pJ9uhsRiI0cDx4O1iQ
- Added At: 2024-10-15 08:00:52
- [Link To Text](2024-10-15-后端开发和你聊聊jvm如何优化_raw.md)

## TL;DR
本文介绍了JVM内存模型及年轻代、老年代GC原理，阐述了JVM优化调优目标及两种场景下的优化方法，强调根据应用背景进行个性化调优，需监控异常并积累经验。

## Summary
1. **JVM内存模型**：
   - **关键区域**：堆、方法区、程序计数器、虚拟机栈和本地方法栈。
   - **年轻代**：E区、S1和S2区。
   - **对象生命周期**：从`.java`文件到`.class`文件，再到堆内存分配，经历YGC和GC。

2. **年轻代回收原理**：
   - **YGC**：回收年轻代中的垃圾对象。
   - **存活对象转移**：存活对象从E区转移到S区。
   - **晋升到老年代**：年龄达到15次YGC或超过S区一半容量。

3. **老年代GC触发时机**：
   - **FGC**：老年代空间不足时触发。
   - **CMS**：老年代使用率达到阈值时启动。
   - **G1**：老年代区域使用率达到一定比例时执行Mixed GC。

4. **JVM优化调优目标**：
   - **低延迟**：GC停顿时间短。
   - **高吞吐量**：单位时间内处理更多工作量。
   - **大内存**：支持更大内存分配。
   - **权衡**：根据应用需求选择合适的GC收集器。

5. **JVM优化的两种场景**：
   - **新应用上线**：通过压测观察GC情况并进行调优。
   - **老应用优化**：针对内存异常、老年代持续上涨、FGC频繁和GC停顿时间长等问题进行优化。

6. **总结**：
   - JVM优化没有固定方案，需要根据应用背景进行。
   - 了解JVM运行情况，监控异常，积累实战经验。
