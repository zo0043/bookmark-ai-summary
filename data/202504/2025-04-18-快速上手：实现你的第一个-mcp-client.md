# 快速上手：实现你的第一个 MCP Client
- URL: https://zhuanlan.zhihu.com/p/21166726702
- Added At: 2025-04-18 16:07:27
- [Link To Text](2025-04-18-快速上手：实现你的第一个-mcp-client_raw.md)

## TL;DR
本文介绍了MCP客户端的工作原理和示例，涵盖获取工具列表、调用工具、集成LLM等功能，并通过Python SDK实现与MCP服务器的通信。

## Summary
1. **MCP Client 介绍**：
   - MCP 客户端作为 LLM 和 MCP 服务器之间的桥梁，负责获取工具列表、发送用户查询、执行工具调用和展示响应。

2. **MCP 客户端工作流程**：
   - 获取工具列表。
   - 将用户查询发送给 LLM。
   - LLM 决定是否使用工具，并指定工具。
   - 执行工具调用。
   - 发送工具调用结果回 LLM。
   - LLM 生成自然语言响应。
   - 展示响应给用户。

3. **MCP 通信方式**：
   - **stdio**：通过标准输入输出建立双向通信，适用于本地快速集成。
   - **SSE**：服务器作为独立进程运行，支持多个客户端连接和断开，将在后续文章介绍。

4. **简单的 MCP 客户端示例**：
   - 使用 MCP Python SDK 和 uv 管理依赖。
   - 设置服务器连接参数。
   - 建立服务器连接。
   - 列出可用工具。
   - 调用工具获取结果。

5. **进阶示例：集成 LLM**：
   - 使用 OpenAI SDK 和 OpenRouter 与 LLM 交互。
   - 初始化客户端类，包括会话、资源管理和 OpenAI 客户端。
   - 服务器连接方法，建立连接并打印工具列表。
   - 处理请求方法，与 LLM 交互并调用工具。
   - 交互式界面方法，提供命令行交互。

6. **程序入口**：
   - 检查命令行参数。
   - 创建 MCPClient 实例并连接到服务器。
   - 启动交互式聊天循环。
   - 使用 try-finally 结构确保资源清理。
   - 使用 asyncio.run 运行异步主函数。

7. **运行程序**：
   - 使用 uv 运行客户端，指定 MCP 服务器代码路径。

8. **总结**：
   - 介绍如何使用 MCP Python SDK 编写 MCP 客户端并集成 LLM。
   - 通过示例展示如何建立连接、调用工具和集成 LLM。

9. **参考资料**：
   - Client Developers 快速入门指南。
   - MCP Python SDK 仓库链接。
   - 关注二维码获取更多信息。
