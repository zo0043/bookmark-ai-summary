# Building effective agents
- URL: https://www.anthropic.com/research/building-effective-agents
- Added At: 2025-01-02 02:36:01
- [Link To Text](2025-01-02-building-effective-agents_raw.md)

## TL;DR
文章总结了构建高效代理系统的关键，包括简单方案、工作流程与代理的区别、框架使用、构建块、多种工作流程模式，并强调成功的关键在于设计适合需求的系统，同时注重透明度和工具文档。

## Summary
1. **成功关键**：
   - 使用简单方案，仅在必要时增加复杂性。
   - 建议从无需构建代理系统开始，仅当需要时才增加复杂性。

2. **代理定义**：
   - 代理可以是完全自主的系统，也可以是遵循预定义工作流程的实施。
   - 在Anthropic，将所有这些变体归类为“代理系统”，但在架构上区分了“工作流程”和“代理”。

3. **工作流程与代理**：
   - **工作流程**：通过预定义的代码路径编排LLM和工具的系统。
   - **代理**：LLM动态指导其自身过程和工具使用的系统。

4. **何时使用代理**：
   - 当需要灵活性和模型驱动的决策时，代理是更好的选择。
   - 对于许多应用，优化单个LLM调用通常足够。

5. **框架使用**：
   - 提供构建代理系统更简单的框架，如LangGraph、Amazon Bedrock的AI Agent框架、Rivet和Vellum。
   - 这些框架简化了标准低级任务，但也可能创建额外的抽象层，使调试变得困难。

6. **构建块：增强型LLM**：
   - 基础构建块是增强型LLM，使用检索、工具和记忆等功能。
   - 建议针对特定用例定制这些功能，并确保它们提供易于使用和文档齐全的界面。

7. **工作流程：提示链**：
   - 将任务分解为一系列步骤，每个LLM调用处理前一个步骤的输出。
   - 适用于将任务轻松且干净地分解为固定子任务的场景。

8. **工作流程：路由**：
   - 根据输入分类并引导它到专门的后续任务。
   - 适用于复杂任务，其中存在可单独处理的明确类别。

9. **工作流程：并行化**：
   - LLM可以同时处理任务，并程序性地聚合其输出。
   - 适用于可以并行化以提高速度或需要多个视角以提高置信度的任务。

10. **工作流程：编排器-工作者**：
    - 中央LLM动态分解任务，委派给工作者LLM，并综合其结果。
    - 适用于无法预测所需子任务的复杂任务。

11. **工作流程：评估器-优化器**：
    - 一个LLM调用生成响应，另一个提供评估和反馈的循环。
    - 适用于具有明确评估标准且迭代细化提供可衡量价值的情况。

12. **代理**：
    - 使用工具并在循环中根据环境反馈进行操作。
    - 适用于开放性问题，难以或不可能预测所需步骤的数量，并且无法硬编码固定路径。

13. **组合和定制模式**：
    - 这些构建块不是强制性的，而是可以塑形和组合以适应不同用例的常见模式。

14. **总结**：
    - 成功不是构建最复杂的系统，而是构建最适合您需求的系统。
    - 建议遵循三个核心原则：保持设计的简单性、优先考虑透明度以及通过彻底的工具文档和测试精心设计代理-计算机接口（ACI）。

15. **附录1：代理在实践中的应用**：
    - 客户支持：结合熟悉的聊天机器人界面和通过工具集成增强的功能。
    - 编码代理：软件开发空间已经显示出LLM功能的巨大潜力。

16. **附录2：提示工程工具**：
    - 工具定义和规范应像整体提示一样得到同样的提示工程关注。
    - 建议为工具格式做出决定，例如保持格式接近模型在互联网上自然发生的格式。
